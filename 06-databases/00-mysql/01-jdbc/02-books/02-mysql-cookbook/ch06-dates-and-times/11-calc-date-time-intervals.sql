
SET @d1 = '2010-01-01', @d2 = '2009-12-01';
SELECT DATEDIFF(@d1,@d2) AS 'd1 - d2', DATEDIFF(@d2,@d1) AS 'd2 - d1';
/*
+---------+---------+
| d1 - d2 | d2 - d1 |
+---------+---------+
|      31 |     -31 |
+---------+---------+
1 row in set (0.00 sec)
*/

SET @t1 = '12:00:00', @t2 = '16:30:00';
SELECT TIMEDIFF(@t1,@t2) AS 't1 - t2', TIMEDIFF(@t2,@t1) AS 't2 - t1';
/*
+-----------+----------+
| t1 - t2   | t2 - t1  |
+-----------+----------+
| -04:30:00 | 04:30:00 |
+-----------+----------+
1 row in set (0.00 sec)
*/

SELECT t1, t2, TIMEDIFF(t2,t1) AS 't2 - t1 as TIME', IF(TIMEDIFF(t2,t1) >= 0, '+','-') AS sign, HOUR(TIMEDIFF(t2,t1)) AS hour, MINUTE(TIMEDIFF(t2,t1)) AS minute FROM time_val;
/*
+----------+----------+-----------------+------+------+--------+
| t1       | t2       | t2 - t1 as TIME | sign | hour | minute |
+----------+----------+-----------------+------+------+--------+
| 15:00:00 | 15:00:00 | 00:00:00        | +    |    0 |      0 |
| 05:01:30 | 02:30:20 | -02:31:10       | -    |    2 |     31 |
| 12:30:20 | 17:30:45 | 05:00:25        | +    |    5 |      0 |
+----------+----------+-----------------+------+------+--------+
3 rows in set (0.00 sec)
*/

SET @dt1 = '1900-01-01 00:00:00', @dt2 = '1920-01-01 00:00:00';
SELECT TIMESTAMPDIFF(MINUTE,@dt1,@dt2) AS minutes, TIMESTAMPDIFF(HOUR,@dt1,@dt2) AS hours, TIMESTAMPDIFF(DAY,@dt1,@dt2) AS days;
/*
+----------+--------+------+
| minutes  | hours  | days |
+----------+--------+------+
| 10517760 | 175296 | 7304 |
+----------+--------+------+
1 row in set (0.00 sec)
*/

SELECT t1, t2, TIME_TO_SEC(t2) - TIME_TO_SEC(t1) AS 't2 - t1 (in seconds)', SEC_TO_TIME(TIME_TO_SEC(t2) - TIME_TO_SEC(t1)) AS 't2 - t1 (as TIME)' FROM time_val;
/*
+----------+----------+----------------------+-------------------+
| t1       | t2       | t2 - t1 (in seconds) | t2 - t1 (as TIME) |
+----------+----------+----------------------+-------------------+
| 15:00:00 | 15:00:00 |                    0 | 00:00:00          |
| 05:01:30 | 02:30:20 |                -9070 | -02:31:10         |
| 12:30:20 | 17:30:45 |                18025 | 05:00:25          |
+----------+----------+----------------------+-------------------+
3 rows in set (0.00 sec)
*/

SET @days = TO_DAYS('1884-01-01') - TO_DAYS('1883-06-05');
SELECT @days AS days, @days/7 AS weeks;
/*
+------+---------+
| days | weeks   |
+------+---------+
|  210 | 30.0000 |
+------+---------+
1 row in set (0.00 sec)
*/
